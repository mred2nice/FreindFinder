<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NewFriendPage</title>
  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
<body>
  <div class="container">
    <div class="jumbotron">
      <h1 class="text-left"><span class=""></span> Survey Questions</h1>
      <hr>
      <h2 class="text-left"><b>About You</b></h2>
      <br>
      <label for="friend-name-input">Name (required)</label>
      <input class="form-control" id="friend-name-input" type="text">
      <label for="friend-image-input">Link to photo image (required)</label>
      <input class="form-control" id="friend-image-input" type="text">
      <br>
      <h2 class="text-left"><b> Question1</b></h2>
        <div class="container">
          <div>
          <p>Your mind is always buzzing with unexplored ideas and plans.</p>
          </div>
          <select id="menu1">
              <option value="1">Select an Option</option>
              <option value="1">1 (Strongly Agree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h2 class="text-left"><b> Question 2</b></h2>
        <div class="container">
          <p>Generally speaking, you rely more on your experience than your imagination.</p>
          <select id="menu2">
              <option value="1">Select an Option</option>
              <option value="1">1 (Strongly Agree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h2 class="text-left"><b> Question 3</b></h2>
        <div class="container">
          <p>You find it easy to stay relaxed and focused even when there is some pressure.</p>
          <select id="menu3">
              <option value="1">Select an Option</option>
              <option value="1">1 (Strongly Agree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h2 class="text-left"><b> Question 4</b></h2>
        <div class="container">
          <p>You rarely do something just out of sheer curiosity.</p>
          <select id="menu4">
              <option value="1">Select an Option</option>
              <option value="1">1 (Strongly Agree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h2 class="text-left"><b> Question 5</b></h2>
        <div class="container">
          <p>People can rarely upset you.</p>
          <select id="menu5">
              <option value="1">Select an Option</option>
              <option value="1">1 (Strongly Agree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h2 class="text-left"><b> Question 6</b></h2>
        <div class="container">
          <p>It is often diffcult for you to relate to other people's feelings.</p>
          <select id="menu6">
              <option value="1">Select an Option</option>
              <option value="1">1 (Strongly Agree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h2 class="text-left"><b> Question 7</b></h2>
        <div class="container">
          <p>In a discussion, truth should be more important than people's sensitivities.</p>
          <select id="menu7">
              <option value="1">Select an Option</option>
              <option value="1">1 (Strongly Agree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h2 class="text-left"><b> Question 8</b></h2>
        <div class="container">
          <p>You raely get carried away with fantasies and ideas.</p>
          <select id="menu8">
              <option value="1">Select an Option</option>
              <option value="1">1 (Strongly Agree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h2 class="text-left"><b> Question 9</b></h2>
        <div class="container">
          <p>You think that everyone's views should be respected regardless of whether they are supported by facts or not.</p>
         <select id="menu9">
              <option value="1">Select an Option</option>
              <option value="1">1 (Strongly Agree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h2 class="text-left"><b> Question 10</b></h2>
        <div class="container">
          <p>You feel more energetic spending time woth a group of people.</p>
         <select id="menu10">
              <option value="1">Select an Option</option>
              <option value="1">1 (Strongly Agree)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <br>
        <div class="span9 btn-block no-padding">
          <button class="btn btn-large btn-block btn-primary full-width" id="add-btn" type="button">Submit</button>
          </div>
        <br>
    <footer class="footer">
      <div class="container">
        <p><a href="/api/friends">API Table Link</a> | <a href="https://github.com/afhaque/HotRestaurant">GitHub Repo</a></p>
      </div>
    </footer>
  </div>
</body>
</html>
<!-- BELOW CODE IS CRITICAL. IT HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->
<script type="text/javascript">
    //************************************************************************************************************/
    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.   /
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api /
    // Our api recognizes the route (/api/friends)... and then runs the associated code (found in api-routes.js). /
    // In this case the associated code "saves" the data to the freindData.js.                                    /
    //************************************************************************************************************/
    $("#add-btn").on("click", function(event) {
      var  a = document.getElementById ("menu1");
      var  menu1 = a.options [a.selectedIndex].value;
      var  b = document.getElementById ("menu2");
      var  menu2 = b.options [b.selectedIndex].value;
      var  c = document.getElementById ("menu3");
      var  menu3 = c.options [c.selectedIndex].value;
      var  d = document.getElementById ("menu4");
      var  menu4 = d.options [d.selectedIndex].value;
      var  e = document.getElementById ("menu5");
      var  menu5 = e.options [e.selectedIndex].value;
      var  f = document.getElementById ("menu6");
      var  menu6 = f.options [f.selectedIndex].value;
      var  g = document.getElementById ("menu7");
      var  menu7 = g.options [g.selectedIndex].value;
      var  h = document.getElementById ("menu8");
      var  menu8 = h.options [h.selectedIndex].value;
      var  i = document.getElementById ("menu9");
      var  menu9 = i.options [i.selectedIndex].value;
      var  j = document.getElementById ("menu10");
      var  menu10 = j.options [j.selectedIndex].value;
      event.preventDefault();
      //*********************************************/
      // Here we grab the User data from the screen. /
      //*********************************************/
      var newFriend = {
        name: $("#friend-name-input").val().trim(),
        photo: $("#friend-image-input").val().trim(),
        scores: 
        [menu1,menu2,menu3,menu4,menu5,menu6,menu7,menu8,menu9,menu10]
      };
      //*************************************************************************************************/
      // This line is the magic. It"s very similar to the standard ajax function we used.                /
      // Essentially we give it a URL, we give it the object we want to send, then we have a "callback". /
      // The callback is the response of the server.                                                     /
      //*************************************************************************************************/
      $.post("/api/friends", newFriend)
      .done(function(data) {
        console.log(data);
        alert("Adding Friend...");
      });
      //**********************************************************************/
      // Compare user input to all of the profile answers of previous entries /
      //**********************************************************************/
       var currentURL = window.location.origin;
      $.ajax({ url: currentURL + "/api/friends", method: "GET" })
      .done(function(response) {
        //*****************************************************/
        // Storing an array of results in the results variable /
        //*****************************************************/
          var diffArray = [];
          //***************************************************************/
          // Outer loop - iterate on the number of members already present /
          //***************************************************************/
          for (var i = 0; i < response.length; i++) {
            console.log("response.length: " + response.length)
            console.log("i: " + i)
            console.log("response.scores: " + response[0].scores)
            //**********************************************************************************/
            // Get difference for each of the 10 answers of each member already entered compare /
            // to current User. Save total difference in array. When done, iterate thorugh the  /
            // the array to find the lowest value which would be the mst compatable.  Then      / 
            // display modal form with the persons picture                                      /            //**********************************************************************************/
            for (var x = 0; x < response[i].scores.length; x++) {
                var diff = 0;
                var totalDiff = 0;
                var scores = response[i].scores[x];
                console.log("x: " + x)
                switch(x){
                  case 0:
                    diff = (menu1-scores);
                    diff = Math.abs(diff);
                    console.log("scores[x]: " + scores)
                    console.log("menu1: " + menu1)
                    console.log("diff: " + diff)
                    break;
                  case 1:
                    diff = (menu2-scores);
                    diff = Math.abs(diff);
                    console.log("scores[x]: " + scores)
                    console.log("menu2: " + menu2)
                    console.log("diff: " + diff)
                    break;
                  case 2:
                    diff = (menu3-scores);
                    diff = Math.abs(diff);
                    console.log("scores[x]: " + scores)
                    console.log("menu3: " + menu3)
                    console.log("diff: " + diff)
                    break;
                  case 3:
                    diff = (menu4-scores);
                    diff = Math.abs(diff);
                    console.log("scores[x]: " + scores)
                    console.log("menu4: " + menu4)
                    console.log("diff: " + diff)
                    break;
                  case 4:
                    diff = (menu5-scores);
                    diff = Math.abs(diff);
                    console.log("scores[x]: " + scores)
                    console.log("menu5: " + menu5)
                    console.log("diff: " + diff)
                    break;
                  case 5:
                    diff = (menu6-scores);
                    diff = Math.abs(diff);
                    console.log("scores[x]: " + scores)
                    console.log("menu6: " + menu6)
                    console.log("diff: " + diff)
                    break;
                  case 6:
                    diff = (menu7-scores);
                    diff = Math.abs(diff);
                    console.log("scores[x]: " + scores)
                    console.log("menu7: " + menu6)
                    console.log("diff: " + diff)
                    break;
                  case 7:
                    diff = (menu8-scores);
                    diff = Math.abs(diff);
                    console.log("scores[x]: " + scores)
                    console.log("menu8: " + menu8)
                    console.log("diff: " + diff)
                    break;
                  case 8:
                    diff = (menu9-scores);
                    diff = Math.abs(diff);
                    console.log("scores[x]: " + scores)
                    console.log("menu9: " + menu9)
                    console.log("diff: " + diff)
                    break;
                  case 9:
                    diff = (menu10-scores);
                    diff = Math.abs(diff);
                    console.log("scores[x]: " + scores)
                    console.log("menu10: " + menu10)
                    console.log("diff: " + diff)
                    break;
                }
                totalDiff = (totalDiff + diff);
            }
            diffArray.push(totalDiff)
            console.log("diffArray: " + diffArray);
          }
      });
    });
  </script>

